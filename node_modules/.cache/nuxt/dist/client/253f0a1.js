(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{364:function(t,e,r){"use strict";var o=r(66),n=r.n(o);e.a=n.a.create({baseURL:"http://localhost:8000/api",headers:{"Content-type":"application/json"}})},368:function(t,e,r){"use strict";var o=r(23),n=r(24),l=r(364),c=function(){function t(){Object(o.a)(this,t)}return Object(n.a)(t,[{key:"upload",value:function(t,content,e,r,o){var n=new FormData;return n.append("boardTitle",t),n.append("content",content),n.append("userIdx",e),n.append("file",r),l.a.post("/upload",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:o})}},{key:"getReplyCount",value:function(t){return l.a.get("/board/detail/replyCount/".concat(t))}},{key:"getFiles",value:function(t){return l.a.get("/files/".concat(t))}},{key:"getDetailFile",value:function(t){return l.a.get("/files/detail/".concat(t))}},{key:"getAll",value:function(t){return l.a.get("/board/list",{params:t})}},{key:"get",value:function(t){return l.a.get("/board/list/idx/".concat(t))}},{key:"create",value:function(data){return l.a.post("/board/write",data)}},{key:"delete",value:function(t){return l.a.put("/board/deletion/".concat(t))}},{key:"detail",value:function(t){return l.a.get("/board/detail/".concat(t))}},{key:"update",value:function(t,data){return l.a.put("/board/detail/update/".concat(t),data)}}]),t}();e.a=new c},396:function(t,e,r){var content=r(440);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(59).default)("3f142a55",content,!0,{sourceMap:!1})},439:function(t,e,r){"use strict";r(396)},440:function(t,e,r){var o=r(58)(!1);o.push([t.i,"hr[data-v-1676dda1]{background-color:#a30000}.btn[data-v-1676dda1]{color:#fff;margin-left:auto}.btn[data-v-1676dda1],.btn[data-v-1676dda1]:active,.btn:hover .btn[data-v-1676dda1]:focus{border:none;background-color:#a30000}.preview[data-v-1676dda1]{max-width:200px}",""]),t.exports=o},515:function(t,e,r){"use strict";r.r(e);r(1),r(48),r(51),r(365),r(250);var o=r(368),n={name:"write",data:function(){return{board:{idx:null,boardTitle:"",content:"",userIdx:JSON.parse(localStorage.getItem("idx")),currentImage:null,imageInfo:[]},submitted:!1,previewImage:void 0,progress:0,message:""}},methods:{selectImage:function(){this.board.currentImage=this.$refs.file.files.item(0),this.previewImage=URL.createObjectURL(this.board.currentImage),this.progress=0,this.message=""},upload:function(){var t=this;this.progress=0,o.a.upload(this.board.boardTitle,this.board.content,JSON.parse(localStorage.getItem("user")).idx,this.board.currentImage,(function(e){t.progress=Math.round(100*e.loaded/e.total)})).then((function(e){alert("자유게시판 게시물 작성 완료"),t.$router.push("/board/list")})).catch((function(e){t.progress=0,t.message="Could not upload the image!"+e,t.board.currentImage=void 0}))}},mounted:function(){console.log(JSON.parse(localStorage.getItem("user")).idx)},beforeCreate:function(){var t=localStorage.getItem("user");console.log(t),null==t&&(alert("로그인 후 이용해주세요. "),this.$router.push("/login"))}},l=(r(439),r(46)),component=Object(l.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),t.submitted?t._e():r("div",[r("span",{staticClass:"btns"},[r("input",{staticClass:"btn",attrs:{type:"button",value:"이전",onclick:"location.href='/board/list'"}}),t._v(" "),r("button",{staticClass:"btn",on:{click:t.upload}},[t._v("등록")])]),t._v(" "),r("hr"),t._v(" "),r("div",{staticClass:"form-group mt-4"},[r("label",[t._v("제목")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.board.boardTitle,expression:"board.boardTitle"}],staticClass:"form-control",attrs:{type:"text",id:"exampleFormControlInput1",placeholder:"제목을 입력해 주세요."},domProps:{value:t.board.boardTitle},on:{input:function(e){e.target.composing||t.$set(t.board,"boardTitle",e.target.value)}}})]),t._v(" "),r("div",[r("p",[t._v("내용")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.board.content,expression:"board.content"}],attrs:{cols:"147",rows:"20"},domProps:{value:t.board.content},on:{input:function(e){e.target.composing||t.$set(t.board,"content",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"container pt-5"},[r("h5",{staticClass:"mb-2"},[t._v("이미지 업로드")]),t._v(" "),r("h6",{staticClass:"mb-4"},[t._v("\n            ( 파일은 최소 1개 이상 첨부하여야 게시물 등록이 완료됩니다. )\n        ")]),t._v(" "),r("div",{staticClass:"row justify-content-md-left"},[r("div",{staticClass:"col-8"},[r("label",{staticClass:"btn btn-default p-0"},[r("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.selectImage}})])])]),t._v(" "),t.board.currentImage?r("div",{staticClass:"progress"},[r("div",{staticClass:"progress-bar progress-bar-info",style:{width:t.progress+"%"},attrs:{role:"progressbar","aria-valuenow":t.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[t._v("\n                "+t._s(t.progress)+"\n            ")])]):t._e(),t._v(" "),t.previewImage?r("div",[r("div",[r("img",{staticClass:"preview my-3",attrs:{src:t.previewImage,alt:"previewImage"}})])]):t._e(),t._v(" "),t.message?r("div",{staticClass:"alert alert-secondary",attrs:{role:"alert"}},[t._v("\n            "+t._s(t.message)+"\n        ")]):t._e(),t._v(" "),t._l(t.board.imageInfo,(function(image,e){return r("div",{key:e,staticClass:"card mt-3"},[r("div",{staticClass:"card-header"},[t._v("이미지 번호 : "+t._s(image.fileId))]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-5 col-md-offset-0"},[r("figure",[r("img",{staticClass:"img-thumbnail",attrs:{src:image.url}})])]),t._v(" "),r("div",{staticClass:"col-md-6 col-md-offset-0 description"},[r("p",{domProps:{innerHTML:t._s(image.fileName)}}),t._v(" "),r("p",{staticClass:"price"},[t._v(t._s(image.url))])])])])}))],2)])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-5"},[r("h5",{staticClass:"text-center mb-5"},[t._v("자유게시판 글쓰기")])])}],!1,null,"1676dda1",null);e.default=component.exports}}]);